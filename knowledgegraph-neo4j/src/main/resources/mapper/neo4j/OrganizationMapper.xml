<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.knowledgegraph.neo4j.mapper.OrganizationMapper">
    
    <resultMap type="Organization" id="OrganizationResult">
        <result property="id"    column="id"    />
        <result property="orgName"    column="org_name"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
        <result property="disabled"    column="disabled"    />
    </resultMap>

    <resultMap type="Expert" id="ExpertResult">
        <result property="id"    column="id"    />
        <result property="expertName"    column="expert_name"    />
        <result property="expertDeptment"    column="expert_deptment"    />
        <result property="expertDec"    column="expert_dec"    />
    </resultMap>

    <select id="selectOrganizationByName" parameterType="String" resultMap="OrganizationResult">
        select * from organization
        where org_name = #{orgName}
    </select>

    <select id="selectExpertByOrgID" parameterType="Long" resultMap="ExpertResult">
        select e.EXPERT_DEC as expert_dec,e.EXPERT_DEPTMENT as expert_deptment,e.EXPERT_NAME as expert_name,e.ID as ID
        from organization as o
                 JOIN relationship as r
                 JOIN expert as e
                      on o.ID=r.ORG_ID and e.ID=r.EXPERT_ID
        where o.ID= #{orgID}
    </select>

</mapper>